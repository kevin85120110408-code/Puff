# ğŸ“§ é‚®ç®±éªŒè¯åŠŸèƒ½è¯´æ˜

**ç‰ˆæœ¬**: 3.7  
**åŠŸèƒ½**: Firebase é‚®ç®±éªŒè¯ç³»ç»Ÿ  
**çŠ¶æ€**: âœ… å·²å®ç°

---

## ğŸ¯ åŠŸèƒ½æ¦‚è¿°

ç°åœ¨ä½ çš„è®ºå›å·²ç»å¯ç”¨äº†**é‚®ç®±éªŒè¯ç³»ç»Ÿ**ï¼

### âœ… å®ç°çš„åŠŸèƒ½

1. **æ³¨å†Œæ—¶è‡ªåŠ¨å‘é€éªŒè¯é‚®ä»¶**
2. **æœªéªŒè¯ç”¨æˆ·æ— æ³•ç™»å½•**
3. **é‡æ–°å‘é€éªŒè¯é‚®ä»¶åŠŸèƒ½**
4. **éªŒè¯åè‡ªåŠ¨æ›´æ–°æ•°æ®åº“**

---

## ğŸš€ ç”¨æˆ·ä½“éªŒæµç¨‹

### 1ï¸âƒ£ æ³¨å†Œæµç¨‹

```
ç”¨æˆ·å¡«å†™æ³¨å†Œä¿¡æ¯
    â†“
ç‚¹å‡» "Create Account"
    â†“
è´¦å·åˆ›å»ºæˆåŠŸ
    â†“
ğŸ‰ è‡ªåŠ¨å‘é€éªŒè¯é‚®ä»¶åˆ°ç”¨æˆ·é‚®ç®±
    â†“
æ˜¾ç¤ºæç¤ºï¼š"Account created! Please check your email to verify your account."
    â†“
ç”¨æˆ·è¢«è‡ªåŠ¨ç™»å‡ºï¼ˆå¿…é¡»å…ˆéªŒè¯ï¼‰
```

---

### 2ï¸âƒ£ éªŒè¯é‚®ä»¶å†…å®¹

ç”¨æˆ·ä¼šæ”¶åˆ°ä¸€å°æ¥è‡ª Firebase çš„é‚®ä»¶ï¼š

**å‘ä»¶äºº**: `noreply@ä½ çš„é¡¹ç›®å.firebaseapp.com`

**é‚®ä»¶æ ‡é¢˜**: "Verify your email for [ä½ çš„é¡¹ç›®å]"

**é‚®ä»¶å†…å®¹**:
```
Hello,

Follow this link to verify your email address.

[Verify Email] <-- ç‚¹å‡»è¿™ä¸ªæŒ‰é’®

If you didn't ask to verify this address, you can ignore this email.

Thanks,
Your [é¡¹ç›®å] team
```

---

### 3ï¸âƒ£ éªŒè¯æµç¨‹

```
ç”¨æˆ·æ‰“å¼€é‚®ç®±
    â†“
ç‚¹å‡» "Verify Email" æŒ‰é’®
    â†“
è·³è½¬åˆ° Firebase éªŒè¯é¡µé¢
    â†“
âœ… éªŒè¯æˆåŠŸï¼
    â†“
è‡ªåŠ¨è·³è½¬å›ä½ çš„ç½‘ç«™
    â†“
ç”¨æˆ·å¯ä»¥æ­£å¸¸ç™»å½•äº†
```

---

### 4ï¸âƒ£ ç™»å½•æµç¨‹ï¼ˆæœªéªŒè¯ç”¨æˆ·ï¼‰

```
æœªéªŒè¯ç”¨æˆ·å°è¯•ç™»å½•
    â†“
è¾“å…¥é‚®ç®±å’Œå¯†ç 
    â†“
ç‚¹å‡» "Sign In"
    â†“
âŒ å¼¹å‡ºæç¤ºï¼š"Email Not Verified"
    â†“
æ˜¾ç¤ºä¸¤ä¸ªæŒ‰é’®ï¼š
  - "Resend Verification Email" (é‡æ–°å‘é€)
  - "Cancel" (å–æ¶ˆ)
    â†“
ç”¨æˆ·ç‚¹å‡» "Resend Verification Email"
    â†“
ğŸ‰ æ–°çš„éªŒè¯é‚®ä»¶å‘é€æˆåŠŸ
    â†“
æ˜¾ç¤ºï¼š"Verification email sent! Please check your inbox."
```

---

### 5ï¸âƒ£ ç™»å½•æµç¨‹ï¼ˆå·²éªŒè¯ç”¨æˆ·ï¼‰

```
å·²éªŒè¯ç”¨æˆ·ç™»å½•
    â†“
è¾“å…¥é‚®ç®±å’Œå¯†ç 
    â†“
ç‚¹å‡» "Sign In"
    â†“
âœ… ç™»å½•æˆåŠŸï¼
    â†“
è¿›å…¥è®ºå›
```

---

## ğŸ¨ è‡ªå®šä¹‰éªŒè¯é‚®ä»¶ï¼ˆå¯é€‰ï¼‰

### å¦‚ä½•è‡ªå®šä¹‰é‚®ä»¶æ¨¡æ¿

1. **æ‰“å¼€ Firebase æ§åˆ¶å°**
   - https://console.firebase.google.com

2. **è¿›å…¥ Authentication**
   - å·¦ä¾§èœå• â†’ Authentication

3. **ç‚¹å‡» Templates æ ‡ç­¾**
   - é¡¶éƒ¨èœå• â†’ Templates

4. **é€‰æ‹© Email address verification**
   - ç‚¹å‡»ç¼–è¾‘ï¼ˆé“…ç¬”å›¾æ ‡ï¼‰

5. **è‡ªå®šä¹‰å†…å®¹**
   - **å‘ä»¶äººåç§°**: æ”¹ä¸ºä½ çš„ç½‘ç«™åç§°
   - **ä¸»é¢˜**: è‡ªå®šä¹‰é‚®ä»¶æ ‡é¢˜
   - **é‚®ä»¶æ­£æ–‡**: è‡ªå®šä¹‰é‚®ä»¶å†…å®¹

**ç¤ºä¾‹è‡ªå®šä¹‰**:
```
å‘ä»¶äººåç§°: Puff Community Forum
ä¸»é¢˜: ğŸ‰ æ¬¢è¿åŠ å…¥ Puff è®ºå›ï¼è¯·éªŒè¯ä½ çš„é‚®ç®±

é‚®ä»¶æ­£æ–‡:
ä½ å¥½ %DISPLAY_NAME%,

æ„Ÿè°¢æ³¨å†Œ Puff ç¤¾åŒºè®ºå›ï¼

è¯·ç‚¹å‡»ä¸‹é¢çš„æŒ‰é’®éªŒè¯ä½ çš„é‚®ç®±åœ°å€ï¼š

%LINK%

éªŒè¯åï¼Œä½ å°±å¯ä»¥ï¼š
âœ… å‘é€æ¶ˆæ¯
âœ… å‚ä¸è®¨è®º
âœ… å…³æ³¨å…¶ä»–ç”¨æˆ·

å¦‚æœä½ æ²¡æœ‰æ³¨å†Œæ­¤è´¦å·ï¼Œè¯·å¿½ç•¥æ­¤é‚®ä»¶ã€‚

ç¥ä½ ä½¿ç”¨æ„‰å¿«ï¼
Puff å›¢é˜Ÿ
```

---

## ğŸ”§ æŠ€æœ¯å®ç°ç»†èŠ‚

### ä»£ç ä¿®æ”¹

#### 1. æ³¨å†Œæ—¶å‘é€éªŒè¯é‚®ä»¶

```javascript
// åˆ›å»ºè´¦å·å
await user.sendEmailVerification({
  url: window.location.origin, // éªŒè¯åè·³è½¬å›ç½‘ç«™
  handleCodeInApp: false
});

// ç«‹å³ç™»å‡ºç”¨æˆ·
await auth.signOut();
```

#### 2. ç™»å½•æ—¶æ£€æŸ¥éªŒè¯çŠ¶æ€

```javascript
// ç™»å½•æˆåŠŸå
if (!user.emailVerified) {
  // æ˜¾ç¤ºæç¤ºå¹¶æä¾›é‡æ–°å‘é€é€‰é¡¹
  showCustomModal(...);
  await auth.signOut();
  return;
}
```

#### 3. å…¨å±€æ£€æŸ¥ï¼ˆonAuthStateChangedï¼‰

```javascript
auth.onAuthStateChanged(async (user) => {
  if (user && !user.emailVerified) {
    showError('Please verify your email before accessing the forum.');
    await auth.signOut();
    return;
  }
  // ... ç»§ç»­åˆå§‹åŒ–
});
```

---

## ğŸ“Š æ•°æ®åº“å­—æ®µ

### users èŠ‚ç‚¹æ–°å¢å­—æ®µ

```json
{
  "users": {
    "userId123": {
      "username": "John",
      "email": "john@example.com",
      "emailVerified": true,  // âœ… æ–°å¢å­—æ®µ
      "role": "user",
      "createdAt": 1234567890,
      "banned": false,
      "muted": false
    }
  }
}
```

---

## âš ï¸ é‡è¦æé†’

### 1. Firebase é‚®ä»¶å‘é€é™åˆ¶

**å…è´¹è®¡åˆ’ (Spark Plan)**:
- âœ… æ¯å¤©æœ€å¤šå‘é€ **100 å°**éªŒè¯é‚®ä»¶
- âœ… å®Œå…¨å…è´¹

**ä»˜è´¹è®¡åˆ’ (Blaze Plan)**:
- âœ… æ— é™åˆ¶å‘é€
- âœ… æŒ‰ä½¿ç”¨é‡ä»˜è´¹

### 2. é‚®ä»¶å¯èƒ½è¿›å…¥åƒåœ¾ç®±

æé†’ç”¨æˆ·ï¼š
- âš ï¸ æ£€æŸ¥åƒåœ¾é‚®ä»¶æ–‡ä»¶å¤¹
- âš ï¸ å°† `noreply@*.firebaseapp.com` æ·»åŠ åˆ°ç™½åå•

### 3. éªŒè¯é“¾æ¥æœ‰æ•ˆæœŸ

- â° éªŒè¯é“¾æ¥**æ°¸ä¹…æœ‰æ•ˆ**
- âœ… ç”¨æˆ·å¯ä»¥éšæ—¶ç‚¹å‡»éªŒè¯

---

## ğŸ§ª æµ‹è¯•æ­¥éª¤

### 1. æµ‹è¯•æ³¨å†Œæµç¨‹

1. æ‰“å¼€ç½‘ç«™
2. ç‚¹å‡» "Register"
3. å¡«å†™ä¿¡æ¯ï¼š
   - Username: `TestUser`
   - Email: `ä½ çš„çœŸå®é‚®ç®±`
   - Password: `test123456`
4. ç‚¹å‡» "Create Account"
5. åº”è¯¥çœ‹åˆ°ï¼šâœ… "Account created! Please check your email..."
6. æ£€æŸ¥é‚®ç®±ï¼ˆåŒ…æ‹¬åƒåœ¾ç®±ï¼‰

### 2. æµ‹è¯•éªŒè¯é‚®ä»¶

1. æ‰“å¼€é‚®ç®±
2. æ‰¾åˆ° Firebase å‘é€çš„é‚®ä»¶
3. ç‚¹å‡» "Verify Email" æŒ‰é’®
4. åº”è¯¥è·³è½¬åˆ° Firebase éªŒè¯é¡µé¢
5. çœ‹åˆ° âœ… "Your email has been verified"
6. è‡ªåŠ¨è·³è½¬å›ä½ çš„ç½‘ç«™

### 3. æµ‹è¯•ç™»å½•ï¼ˆæœªéªŒè¯ï¼‰

1. æ³¨å†Œå**ä¸è¦éªŒè¯é‚®ç®±**
2. å°è¯•ç™»å½•
3. åº”è¯¥çœ‹åˆ°ï¼šâŒ "Email Not Verified" å¼¹çª—
4. ç‚¹å‡» "Resend Verification Email"
5. åº”è¯¥çœ‹åˆ°ï¼šâœ… "Verification email sent!"

### 4. æµ‹è¯•ç™»å½•ï¼ˆå·²éªŒè¯ï¼‰

1. éªŒè¯é‚®ç®±å
2. è¾“å…¥é‚®ç®±å’Œå¯†ç 
3. ç‚¹å‡» "Sign In"
4. åº”è¯¥çœ‹åˆ°ï¼šâœ… "Login successful!"
5. æˆåŠŸè¿›å…¥è®ºå›

---

## ğŸ› å¸¸è§é—®é¢˜

### Q1: æ”¶ä¸åˆ°éªŒè¯é‚®ä»¶ï¼Ÿ

**è§£å†³æ–¹æ¡ˆ**:
1. âœ… æ£€æŸ¥åƒåœ¾é‚®ä»¶æ–‡ä»¶å¤¹
2. âœ… ç¡®è®¤é‚®ç®±åœ°å€æ­£ç¡®
3. âœ… ç­‰å¾… 5-10 åˆ†é’Ÿï¼ˆå¯èƒ½å»¶è¿Ÿï¼‰
4. âœ… ç‚¹å‡» "Resend Verification Email" é‡æ–°å‘é€

### Q2: éªŒè¯é“¾æ¥ç‚¹å‡»åæ²¡ååº”ï¼Ÿ

**è§£å†³æ–¹æ¡ˆ**:
1. âœ… ç¡®ä¿ä½¿ç”¨åŒä¸€ä¸ªæµè§ˆå™¨
2. âœ… æ¸…é™¤æµè§ˆå™¨ç¼“å­˜
3. âœ… å°è¯•å¤åˆ¶é“¾æ¥åˆ°æ–°æ ‡ç­¾é¡µ

### Q3: å·²ç»éªŒè¯äº†ä½†è¿˜æ˜¯æç¤ºæœªéªŒè¯ï¼Ÿ

**è§£å†³æ–¹æ¡ˆ**:
1. âœ… å®Œå…¨é€€å‡ºç™»å½•
2. âœ… æ¸…é™¤æµè§ˆå™¨ç¼“å­˜
3. âœ… é‡æ–°ç™»å½•

### Q4: æƒ³è¦ç¦ç”¨é‚®ç®±éªŒè¯ï¼Ÿ

**è§£å†³æ–¹æ¡ˆ**:
åˆ é™¤ä»¥ä¸‹ä»£ç ï¼š

```javascript
// åœ¨ auth.onAuthStateChanged ä¸­åˆ é™¤
if (!user.emailVerified) {
  showError('Please verify your email...');
  await auth.signOut();
  return;
}

// åœ¨ loginBtn ä¸­åˆ é™¤
if (!user.emailVerified) {
  showCustomModal(...);
  await auth.signOut();
  return;
}
```

---

## ğŸ“ˆ ç»Ÿè®¡æ•°æ®

### å¯ä»¥åœ¨ Firebase æ§åˆ¶å°æŸ¥çœ‹

1. **Authentication â†’ Users**
   - æŸ¥çœ‹æ‰€æœ‰ç”¨æˆ·
   - æŸ¥çœ‹éªŒè¯çŠ¶æ€ï¼ˆç»¿è‰²å‹¾å· = å·²éªŒè¯ï¼‰

2. **Authentication â†’ Templates**
   - æŸ¥çœ‹é‚®ä»¶å‘é€ç»Ÿè®¡

---

## ğŸ‰ æ€»ç»“

**ä½ çš„è®ºå›ç°åœ¨**:
- âœ… æ³¨å†Œæ—¶è‡ªåŠ¨å‘é€éªŒè¯é‚®ä»¶
- âœ… æœªéªŒè¯ç”¨æˆ·æ— æ³•ç™»å½•
- âœ… å¯ä»¥é‡æ–°å‘é€éªŒè¯é‚®ä»¶
- âœ… éªŒè¯åè‡ªåŠ¨æ›´æ–°æ•°æ®åº“
- âœ… å®Œå…¨å…è´¹ï¼ˆæ¯å¤© 100 å°é‚®ä»¶ï¼‰

**ç‰ˆæœ¬**: 3.6 â†’ 3.7  
**æ–°åŠŸèƒ½**: é‚®ç®±éªŒè¯ç³»ç»Ÿ  
**çŠ¶æ€**: âœ… å®Œæˆ

**ç°åœ¨åˆ·æ–°é¡µé¢æµ‹è¯•å§ï¼** ğŸš€âœ¨

